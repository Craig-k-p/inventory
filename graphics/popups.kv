#: include graphics/screens.kv

<AllignLayout@AnchorLayout>:
    size_hint: (1, 1)
    anchor_x: 'left'
    anchor_y: 'bottom'


<MoveButton>:
    color: app.kv_settings['text color']
    size_hint: (None, None)
    size: (250, 50)
    background_normal: ''
    background_color: (.79, .73, .51, 1)
    font_size: '22sp'
    bold: True
    color: (0,0,0,1)


<PopLabel>:
    bold: True
    color: app.kv_settings['text color']
    # This prevents the Label from taking up the whole width of the screen and subsequently centering the text
    # Allows the AnchorLayout to allign this widget along the x axis (left, center, right)
    size_hint: (None, None)
    font_size: 22
    size: (self.texture_size[0]+10, self.texture_size[1])


<PopInput>:
    hint_text: 'required'
    color: app.kv_settings['text color']
    # Python way: Use on_focus and on_error to call self.setBackground
    background_color: (.8,.8,1,1) if self.focus else ((1,.8,.8,1) if self.error else (1,1,1,1))
    size_hint: (.9, None)
    height: self.minimum_height
    multiline: False
    font_size: 22
    error: False


<PopButton>:
    color: app.kv_settings['text color']
    size_hint: (1, 1)
    font_size: 22


<PopPairGrid@GridLayout>:
    size_hint: (1, 1)
    cols: 1
    spacing: 10


<PopupErrorContent>:
    size_hint: (None, None)
    size: (400, 250)
    cols: 1
    app: app


<PopupThingContent>:  # ScrollView inheritance - popup.py
    description: description
    usd_value: usd_value
    weight: weight
    tags: tags
    app: app
    submit_button: submit_button

    id: popup_content
    size_hint: (1, 1)

    GridLayout:
        cols: 1
        size_hint: (1, 1)
        padding: 10
        spacing: 10
        # Allow ScrollView to scroll (next two lines)
        size_hint_y: None
        height: self.minimum_height
        row_default_height: 90
        row_force_default: True
        padding: 20
        spacing: 20

        PopPairGrid:
            cols: 1
            size_hint: (1, 1)
            AllignLayout:
                PopLabel:
                    text: 'Object description:'
            PopInput:
                id: description

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Object value (USD):'
            PopInput:
                id: usd_value

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Object weight (lbs):'
            PopInput:
                id: weight

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Searchable keyword tag:'
            PopInput:
                hint_text: 'Use an _ to make a multi-word tag'
                id: tags

        PopPairGrid:
            cols: 2
            size_hint: (1, None)
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'center'
                size_hint: (.5, 1)
                PopButton:
                    text: 'Cancel'
                    size_hint: (None, None)
                    size: (180, 90)
                    on_release:
                        app.pop.dismiss()
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'center'
                size_hint: (.5, 1)
                PopButton:
                    id: submit_button
                    text: 'Add to container'
                    size_hint: (None, None)
                    size: (180, 90)
                    on_release:
                        popup_content.checkFormat(popup_content=popup_content, object_class_str='thing')


<PopupContainerContent>:
    description: description
    location: location
    usd_value: usd_value
    weight: weight
    tags: tags
    app: app
    submit_button: submit_button

    id: popup_content
    size_hint: (1, 1)

    GridLayout:
        cols: 1
        size_hint: (1, 1)
        padding: 10
        spacing: 10
        # Allow ScrollView to scroll (next two lines)
        size_hint_y: None
        height: self.minimum_height
        row_default_height: 90
        row_force_default: True
        padding: 20
        spacing: 20

        PopPairGrid:
            cols: 1
            size_hint: (1, 1)
            AllignLayout:
                PopLabel:
                    text: 'Container description:'
            PopInput:
                id: description

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Container value (USD):'
            PopInput:
                id: usd_value

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Container empty weight (lbs):'
            PopInput:
                id: weight

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Container location'
            PopInput:
                id: location

        PopPairGrid:
            AllignLayout:
                PopLabel:
                    text: 'Short descriptive keyword tags:'
            PopInput:
                id: tags
                hint_text: 'Use an _ to make a multi-word tag'

        PopPairGrid:
            cols: 2
            size_hint: (1, None)
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'center'
                size_hint: (.5, 1)
                PopButton:
                    text: 'Cancel'
                    size_hint: (None, None)
                    size: (180, 90)
                    on_release:
                        app.pop.dismiss()
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'center'
                size_hint: (.5, 1)
                PopButton:
                    id: submit_button
                    size_hint: (None, None)
                    size: (180, 90)
                    on_release:
                        popup_content.checkFormat(popup_content=popup_content, object_class_str='container')

# Makes the submit and cancel buttons for moving a container
<PopupMoveContainerContent>:
    submit_button: submit_button
    size_hint: (1, 1)
    cols: 2
    MoveButton:
        size_hint: (.3, .3)
        size: (120,70)
        text: 'Cancel'
        on_release: app.pop.dismiss()
    MoveButton:
        id: submit_button
        size_hint: (.3, .3)
        size: (120,70)
        text: 'Submit'
        on_release:
            self.move()
            app.pop.dismiss()

<PopupWarningDelete>:
    GridLayout:
        cols: 1
        size_hint: (1, 1)
        padding: 10

        GridLayout:
            cols: 1
            spacing: 10

            AllignLayout:
                anchor_x: 'center'
                PopLabel:
                    text: 'This container still has contents that will be deleted.'
            AllignLayout:
                anchor_x: 'center'
                PopLabel:
                    text: 'Proceed?'

        GridLayout:
            rows: 1
            size_hint: (1, 1)
            padding: 20
            spacing: 20
            AllignLayout:
                anchor_x: 'center'
                PopButton:
                    size_hint: (None, None)
                    size: (120,70)
                    text: 'Cancel'
                    on_release: app.pop.dismiss()
            AllignLayout:
                anchor_x: 'center'
                PopButton:
                    size_hint: (None, None)
                    size: (140,70)
                    text: 'Delete it all'
                    on_release:
                        app.selection.get(suppress=True).getObj().delete()
                        app.pop.dismiss()


<PopupListContent>:  # ScrollView inheritance - popup.py
    pop_grid: pop_grid
    size_hint: (1, 1)
    bar_width: 20  # Make sure users know they can scroll
    # Allow using the bar or click and drag to scroll
    scroll_type: ['bars', 'content']

    GridLayout:
        id: pop_grid
        cols: 1
        size_hint_x: 1
        # Allow ScrollView to scroll
        size_hint_y: None
        height: self.minimum_height
        row_default_height: 60
        row_force_default: True
        spacing: 10
